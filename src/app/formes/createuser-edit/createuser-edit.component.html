<app-alerts></app-alerts>
  <div class="row">
    <div class="col col-sm-12 col-md-6 col-lg-6">
      <div class="card card-body">
        <!-- outlet photo upload && Application Information -->
        <div class="form-group">
          <div class="row">
            <div class="col">
              <label>Outlet Photo</label>
              <input type="file" accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerOutletPhoto($event)"/>
            </div>
            <div class="col">
              <div *ngIf="outletPhoto != undefined && outletPhoto != ''">
                <img [src]="outletPhoto" style="width:30%; height:30%;" align="right"/>
              </div>
            </div>
          </div>
        </div>

        <div class="applicationInfo mt-2">
          <strong>Applicant Information</strong>
        </div>
        <div class="form-group mt-2">
          <label for="username">
            <font color="red">
              <strong>* </strong>
            </font>Username
            <font color="red"> (Compulsory for save draft)</font>
          </label>
          <input type="text" class="form-control" name="username" id="username" (keyup)="autosave()" [(ngModel)]="username" #username1="ngModel">
        </div>

        <div class="form-group">
          <label for="password">
            <font color="red">
              <strong>* </strong>
            </font>Password</label>
          <input type="text" class="form-control" name="password" id="password" (keyup)="autosave()" [(ngModel)]="password" #password1="ngModel">
        </div>

        <div class="form-group">
          <label for="exampleInputEmail">
            <font color="red">
              <strong>* </strong>
            </font>Email Address</label>
          <input type="email" class="form-control" name="Email" id="exampleInputEmail" (keyup)="autosave()" [(ngModel)]="email" #email1="ngModel">
        </div>

        <div class="form-group">
          <label for="inputFirstName">
            <font color="red">
              <strong>* </strong>
            </font>First Name</label>
          <input type="text" class="form-control" name="firstName" id="inputFirstName" (keyup)="autosave()" [(ngModel)]="firstname"
            #firstname1="ngModel">
        </div>

        <div class="form-group">
          <label for="inputName">
            <font color="red">
              <strong>* </strong>
            </font>Last Name</label>
          <input type="text" class="form-control" name="lastName" id="inputLastName" (keyup)="autosave()" [(ngModel)]="lastname" #lastname1="ngModel">
        </div>

        <div class="form-group">
          <label for="inputMobileNumber">
            <font color="red">
              <strong>* </strong>
            </font>Mobile Number
            <font color="red"> (Compulsory for save draft)</font>
          </label>
          <input type="text" class="form-control" name="mobile" id="inputMobileNumber" (keyup)="autosave()" pattern="[\+][5-6]{2}[\-]\d{8}"
            placeholder="+65-xxxxxxxx" [(ngModel)]="mobile" #mobile1="ngModel">
          <div [hidden]="mobile1.valid || mobile1.pristine" class="alert alert-danger">Mobile Number should be in +65-xxxxxxxx format</div>
        </div>

        <div class="form-group">
          <label for="inputICNumber">
            <font color="red">
              <strong>* </strong>
            </font>IC Number</label>
          <input type="text" class="form-control" name="icNumber" id="inputICNumber" (keyup)="autosave()" [(ngModel)]="icNumber" #icNumber1="ngModel" required>
        </div>
      </div>

      <div class="card card-body">
        <div class="applicationInfo mb-4">
          <strong>Bank Information</strong>
        </div>
        <div class="form-group">
          <label for="bankName">
            <font color="red">
              <strong>* </strong>
            </font>Bank Name</label>
          <input type="text" class="form-control" name="bankName" id="bankName" (keyup)="autosave()" [(ngModel)]="bankName" #bankNumber1="ngModel"
            required>
        </div>

        <div class="form-group">
          <label for="bankAccountName">
            <font color="red">
              <strong>* </strong>
            </font>Bank Account Name</label>
          <input type="text" class="form-control" name="bankAccountName" id="bankAccountName" (keyup)="autosave()" [(ngModel)]="bankAccountName"
            #bankAccountName1="ngModel">
        </div>

        <div class="form-group">
          <label for="bankAccountNumber">
            <font color="red">
              <strong>* </strong>
            </font>Bank Account Number</label>
          <input type="text" class="form-control" name="bankAccountNumber" id="bankAccountNumber" (keyup)="autosave()" [(ngModel)]="bankAccountNumber"
            #bankAccountNumber1="ngModel">
        </div>

        <div class="form-group">
          <label for="bankStatementEmail">Bank Statement Email</label>
          <input type="text" class="form-control" name="bankStatementEmail" id="bankStatementMail" (keyup)="autosave()" [(ngModel)]="bankStatementEmail"
            #bankStatementEmail1="ngModel">
          <small id="bankAccountNumber" class="form-text text-primary">(If different with above email address)</small>
        </div>
      </div>

      <div class="card card-body">
        <div class="hidden-md">
          <strong>Documents Required</strong>
        </div>

        <div class="form-group mt-3">
          <div class="row">
            <div class="col col-lg-10">
              <label for="nricOfFrontApplication">
                <font color="red">
                  <strong>* </strong>
                </font>NRIC
                <strong>(Front)</strong> of Applicant</label>
            </div>
            <div class="col col-lg-2">
              <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeFrontIC()">
                <span class="glyphicon glyphicon-trash"></span> Remove
              </button>
            </div>
          </div>
          <div *ngIf="nricFrontImage != undefined && nricFrontImage != ''">
            <img [src]="nricFrontImage" style="width:50%;height:50%;" />
          </div>
          <input type="file" accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerNricFront($event)"
          />
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col col-lg-10">
              <label for="nricOfBackApplication">
                <font color="red">
                  <strong>* </strong>
                </font>NRIC
                <strong>(Back)</strong> of Applicant</label>
            </div>
            <div class="col col-lg-2">
              <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeBackIC()">
                <span class="glyphicon glyphicon-trash"></span> Remove
              </button>
            </div>
          </div>
          <div *ngIf="nricBackImage != undefined && nricBackImage != ''">
            <img [src]="nricBackImage" style="width:50%;height:50%;" />
          </div>
          <input type="file" accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerNricBack($event)"
          />
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col col-lg-10">
              <label for="acrabizfile">ACRA BizFile</label>
            </div>
            <div class="col col-lg-2">
              <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeAcra()">
                <span class="glyphicon glyphicon-trash"></span> Remove
              </button>
            </div>
          </div>
          <div *ngIf="acraBizFile != undefined && acraBizFile != ''">
            <img [src]="acraBizFile" style="width:50%; height:50%;" />
          </div>
          <input type="file" accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerAcraBizFile($event)"
          />
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col col-lg-10">
              <label for="neaLicenseCopy">NEA License Copy</label>
            </div>
            <div class="col col-lg-2">
              <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeNEA()">
                <span class="glyphicon glyphicon-trash"></span> Remove
              </button>
            </div>
          </div>
          <div *ngIf="neaLicenseImage != undefined && neaLicenseImage != ''">
            <img [src]="neaLicenseImage" style="width:50%;height:50%;" />
          </div>
          <input type="file" accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerNea($event)" />
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col col-lg-10">
              <label for="tobaccoLicense">Tobacco / Alcohol License</label>
            </div>
            <div class="col col-lg-2">
              <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeTob()">
                <span class="glyphicon glyphicon-trash"></span> Remove
              </button>
            </div>
          </div>
          <div *ngIf="tobaccoAlcoholLicense != undefined && tobaccoAlcoholLicense != ''">
            <img [src]="tobaccoAlcoholLicense" style="width:50%;height:50%;" />
          </div>
          <input type="file" multiple accept="image/*" (keyup)="autosave()" base-sixty-four-input (change)="changeListenerTob($event)"
          />
        </div>
      </div>
    </div>

    <div class="col col-sm-12 col-md-6 col-lg-6">
      <div class="card card-body">
        <div class="applicationInfo mb-4">
          <strong>Company Information</strong>
        </div>
        <div class="form-group">
          <label for="restaurantName">
            <font color="red">
              <strong>* </strong>
            </font>
            Name of Restaurant</label>
          <input type="text" class="form-control" name="restaurantName" id="inputRestaurantName" (keyup)="autosave()" [(ngModel)]="restaurantName" #restaurantName1="ngModel">
        </div>

        <div class="form-group">
          <label for="businessLegalName">
            <font color="red">
              <strong>* </strong>
            </font>Business Legal Name</label>
          <input type="text" class="form-control" name="businessLegalName" id="businessLegalName" (keyup)="autosave()" [(ngModel)]="businessLegalName"
            #businessLegalName1="ngModel">
        </div>

        <div class="form-group">
          <label for="ACRANumber">
            <font color="red">
              <strong>* </strong>
            </font>ACRA Number</label>
          <input type="text" class="form-control" name="acra" id="acra" (keyup)="autosave()" [(ngModel)]="acra" #acra1="ngModel">
        </div>

        <div class="form-group">
          <label for="Country">
            <font color="red">
              <strong>* </strong>
            </font>Country</label>
          <input type="text" class="form-control" name="country" id="country" (keyup)="autosave()" [(ngModel)]="country" #country1="ngModel">
        </div>

        <div class="form-group">
          <label for="RegisteredAddress">
            <font color="red">
              <strong>* </strong>
            </font>Postal Code</label>
          <input type="text" class="form-control" name="postalcode" id="postalcode" (keyup)="autosave()" [(ngModel)]="postalcode" #postalcode1="ngModel"
            pattern="[0-9]{6}">
          <div [hidden]="postalcode1.valid || postalcode1.pristine" class="alert alert-danger">eg.123456</div>
        </div>

        <div class="form-group">
          <label for="RegisteredAddress">
            <font color="red">
              <strong>* </strong>
            </font>Registered Address</label>
          <input type="text" class="form-control" name="registeredAddress" id="RegisteredAddress" (keyup)="autosave()" [(ngModel)]="registeredAddress"
            #registeredAddress1="ngModel">
        </div>

        <div class="form-group">
          <label for="numberOfOutlet">
            <font color="red">
              <strong>* </strong>
            </font>Number of Outlet</label>
          <input type="number" value="1" class="form-control" name="numberOfOutlet" id="numberOfOutlet" (keyup)="autosave()" min="0"
            aria-describedby="minimumNumber" [(ngModel)]="numberOfOutlet" #numberOfOutlet1="ngModel" oninput="this.value = Math.abs(this.value)">
          <small id="minimumNumber" class="form-text text-primary">Minimum 1 outlet</small>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col col-lg-2">
              <label for="outletAddress">Outlet Address</label>
            </div>
            <div class="col col-lg-3">
              <button type="button" class="btn btn-sm btn-outline-info" (click)="addOutletAddress()">Add</button>
            </div>
          </div>
          <table class="table table-bordered mt-3">
            <thead>
              <th style="width:15%">Index</th>
              <th style="width: 20%">Outlet Name</th>
              <th>Address</th>
              <th style="width:15%">Action</th>
            </thead>

            <tbody>
              <tr *ngFor="let outletAdd of outletAddress; let i=index">
                <td>
                  Address {{i+1}}
                </td>
                <td>
                  <input type="text" class="form-control" id="outletName" [(ngModel)]="outletAdd.Name" name="{{'outletName'+i}}" #outletName1="ngModel">
                </td>
                <td>
                  <input type="text" class="form-control" id="outletAddress" [(ngModel)]="outletAdd.Address" name="{{'outletAddress'+i}}" #outletAddress1="ngModel">
                </td>
                <td>
                  <button class="btn btn-default" type="button" (click)="deleteOutletAddress(i)">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="row">
            <div class="col mt-2">

            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="legalEntityType" name="LegalEntity">
            <font color="red">
              <strong>* </strong>
            </font>Legal Entity Type</label>
          <select class="form-control" [(ngModel)]="legalEntitySelection" name="legalEntitySelection" style="width: 100%; height: 35px">
            <option *ngFor="let legalEntity of legalEntityType">{{legalEntity}}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="servChargeRate">Service Charge Rate</label>
          <input type="number" class="form-control" id="servChargeRate" name="servChargeRate" min="0" (keyup)="autosave()" [(ngModel)]="servChargeRate"
            #servChargeRate1="ngModel">
        </div>
      </div>
      
      <div class="card card-body" id="opentiming">
        <div class="form-group">
          <div class="row justify-content-between mb-2">
            <div class="col-4">
              <label for="openingTime">
                <strong>Opening Time</strong>
              </label>
            </div>
          </div>

          <ng-container *ngFor="let operationData of OpenTiming; let dayIdx = index;">
            <div class="row">
              <div class="col col-lg-4">
                <font color="blue">{{operationData.Name}}</font>
              </div>
              <div class="col col-lg-3">
                <font color="blue">Close Today</font>
              </div>
              <div class="col col-lg-2 mb-2">
                <input type="checkbox"[(ngModel)]="OpenTiming[dayIdx].ClosedToday" name="ClosedToday">
              </div>
            </div>
            <ng-container *ngFor="let operationTime of operationData.OperationHourList; let i=index;">
              <ng-container *ngIf="!operationData.ClosedToday">
                <div class="row">
                  <div class="col col-lg-4 mb-2">
                    <input class="form-control" type="time"  [(ngModel)]="OpenTiming[dayIdx].OperationHourList[i].OpenTime" name="OpenTime" (blur)="openTimeChanged($event.target.value,dayIdx, i)" required> 
                  </div>
                  <div class="col col-lg-4 mb-2">
                    <input class="form-control" type="time" [(ngModel)]="OpenTiming[dayIdx].OperationHourList[i].CloseTime" name="CloseTime" (blur)="closeTimeChanged($event.target.value,dayIdx, i)" required>
                  </div>
                  <div class="col col-lg-2 mb-2">
                    <button type="button" class="btn btn-sm btn-info pull-right" style="width: 60px; height:35px" (click)="addOperationTime(dayIdx, i)">Add</button>
                  </div>
                  <div class="col col-lg-2 mb-2">
                    <button type="button" class="btn btn-sm btn-danger pull-right" style="width: 60px; height:35px" *ngIf="(i > 0  && i == operationData.OperationHourList.length-1)" (click)="removeOperationTime(dayIdx, i)">
                    Delete</button>
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </ng-container>

        </div>
      </div>

      <!-- Submit Modal -->
      <div class="modal fade" id="submitModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Are you sure submit this form?</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
              <strong style="color: rgb(5, 5, 5);">You are going to submit this form...</strong>
            </div>
            <div class="modal-footer">
              <button *ngIf="status!=='approved'" type="button" class="btn btn-default" data-dismiss="modal" (click)="onSubmit()">Yes</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="buttonContainer">
    <div class="buttonGroup">
      <button type="button" class="btn btn-outline-info xinBtn" id="saveButton" (click)="saveDraft(true)">Save Draft</button>
      <button type="submit" class="btn btn-outline-info xinBtn" id="submitButton" data-toggle="modal" data-target="#submitModal">Submit</button>
      <button type="reset" class="btn btn-outline-info xinBtn" id="resetButton" value="Reset">Reset</button>
    </div>
  </div>
